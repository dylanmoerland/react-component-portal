{"version":3,"sources":["../../dist/index.es.js","index.js","App.js"],"names":["_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","PortalContext","node_modules_react_default","a","createContext","index_es_usePortalRegistery","context","useContext","Error","index_es_PortalProvider","_ref","children","containers","useRef","current","_React$useState2","useState","currentId","setCurrentId","renderContainer","name","Object","keys","sort","map","id","addContainer","useMemo","container","removeContainer","addChild","child","clearChild","register","concat","unregister","index_es_useRegistery","createElement","Provider","propTypes","prop_types_default","oneOfType","node","arrayOf","index_es_Portal","destination","data","_usePortalRegistery","useEffect","renderNodeInPortal","useCallback","string","isRequired","index_es_PortalDestination","amountOfChildren","setAmountOfChildren","ReactDOM","render","react_default","document","getElementById"],"mappings":"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","file":"static/js/main.8850d016.chunk.js","sourcesContent":["import React from 'react';\nimport PT from 'prop-types';\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar PortalContext = React.createContext();\n\nvar usePortalRegistery = function usePortalRegistery() {\n  var context = React.useContext(PortalContext);\n\n  if (!context) {\n    throw new Error('Portal components should be rendered inside the Portal compount component');\n  }\n\n  return context;\n};\n\nvar useRegistery = function useRegistery() {\n  var containers = React.useRef({}).current;\n  var children = React.useRef({}).current;\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      currentId = _React$useState2[0],\n      setCurrentId = _React$useState2[1];\n\n  var renderContainer = function renderContainer(name) {\n    return children[name] ? Object.keys(children[name]).sort().map(function (id) {\n      return children[name][id];\n    }) : [];\n  };\n\n  var addContainer = React.useMemo(function (name, container) {\n    containers[name] = container;\n  }, [containers]);\n\n  var removeContainer = function removeContainer(name) {\n    containers[name] = null;\n  };\n\n  var addChild = React.useMemo(function (name, id, child) {\n    children[name][id] = child;\n  }, [children]);\n\n  var clearChild = function clearChild(name, id) {\n    delete children[name][id];\n  };\n\n  var register = React.useMemo(function (name, child) {\n    children[name] = children[name] || {};\n    var id = \"\".concat(name, \"_\").concat(currentId);\n    children[name][id] = child;\n    setCurrentId(currentId + 1);\n    return id;\n  }, [setCurrentId, currentId]);\n  var unregister = React.useMemo(function (name, id) {\n    clearChild(name, id);\n  }, [clearChild]);\n  return React.useMemo(function () {\n    return {\n      addChild: addChild,\n      renderContainer: renderContainer,\n      addContainer: addContainer,\n      removeContainer: removeContainer,\n      clearChild: clearChild,\n      register: register,\n      unregister: unregister\n    };\n  }, [addChild, renderContainer, addContainer, removeContainer, register, unregister, clearChild]);\n};\n\nvar PortalProvider = function PortalProvider(_ref) {\n  var children = _ref.children;\n  var value = useRegistery();\n  return React.createElement(PortalContext.Provider, {\n    value: value\n  }, children);\n};\n\nPortalProvider.propTypes = {\n  children: PT.oneOfType([PT.node, PT.arrayOf(PT.node)])\n};\n\nvar Portal = function Portal(_ref) {\n  var destination = _ref.destination,\n      children = _ref.children;\n  var data = React.useRef({}).current;\n\n  var _usePortalRegistery = usePortalRegistery(),\n      register = _usePortalRegistery.register,\n      unregister = _usePortalRegistery.unregister,\n      addChild = _usePortalRegistery.addChild;\n\n  React.useEffect(function () {\n    data.id = register(destination, children);\n    renderNodeInPortal();\n    return function () {\n      unregister(destination, data.id);\n    };\n  }, [children]);\n  var renderNodeInPortal = React.useCallback(function () {\n    addChild(destination, children);\n  }, [addChild, destination, children]);\n  return null;\n};\n\nPortal.propTypes = {\n  destination: PT.string.isRequired,\n  children: PT.node\n};\nvar _this = undefined;\n\nvar PortalDestination = function PortalDestination(_ref) {\n  var name = _ref.name;\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      amountOfChildren = _React$useState2[0],\n      setAmountOfChildren = _React$useState2[1];\n\n  var _usePortalRegistery = usePortalRegistery(),\n      addContainer = _usePortalRegistery.addContainer,\n      removeContainer = _usePortalRegistery.removeContainer,\n      renderContainer = _usePortalRegistery.renderContainer;\n\n  React.useEffect(function () {\n    addContainer(name, _this);\n    return function () {\n      removeContainer(name, _this);\n    };\n  });\n  React.useEffect(function () {\n    var length = renderContainer(name).length;\n\n    if (length !== amountOfChildren) {\n      setAmountOfChildren(length);\n    }\n  }, [renderContainer(name)]);\n  return renderContainer(name);\n};\n\nPortalDestination.propTypes = {\n  name: PT.string.isRequired\n};\nexport { Portal, PortalDestination, PortalProvider };","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\n\nimport {\n  PortalProvider,\n  PortalDestination,\n  Portal,\n} from 'react-component-portal';\n\nexport default () => (\n  <PortalProvider>\n    <main>\n      <PortalDestination name=\"example\" />\n    </main>\n    <Portal destination=\"example\">\n      <p>This will render in main</p>\n    </Portal>\n  </PortalProvider>\n);\n"],"sourceRoot":""}